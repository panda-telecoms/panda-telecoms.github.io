<!DOCTYPE html><html lang="ja"><head prefix="og: //ogp.me/ns# fb: //ogp.me/ns/fb# article: //ogp.me/ns/article#"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="referrer" content="no-referrer"><meta name="theme-color" content="#333333"><meta name="mobile-web-app-capable" content="yes"><meta name="google" content="notranslate"><meta name="format-detection" content="telephone=no"><meta name="keyword" content="技術ブログ,PHP,Java,Kotlin,JavaScript,TypeScript,AWS,英語,日常"><meta name="description" content="半田情報通信の技術ブログです、Web(PHP/Java)、AWS、Androidとかについてつぶやきます"><meta property="og:title" content="【PostGIS】ローカルのdockerでPostGIS+pgrouting環境を作ってみる - ぱんだのてちょう"><meta property="og:type" content="artcle"><meta property="og:url" content="https://panda-telecoms.github.io/2020/07/27/%E3%80%90PostGIS%E3%80%91%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AEdocker%E3%81%A7PostGIS+pgrouting%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B/index.html"><meta property="og:image" content="https://panda-telecoms.github.io/icons/panda_192_192.png"><meta property="og:site_name" content="ぱんだのてちょう"><meta property="og:description" content="半田情報通信の技術ブログです、Web(PHP/Java)、AWS、Androidとかについてつぶやきます"><meta name="twitter:card" content="card"><meta name="twitter:site" content="@panda_telecoms"><meta name="twitter:player" content="@panda_telecoms"><title>【PostGIS】ローカルのdockerでPostGIS+pgrouting環境を作ってみる - ぱんだのてちょう</title><base href="/"><link rel="preconnect" href="//cdn.bootcss.com"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/icons/panda_72_72.png"><link rel="apple-touch-icon" href="/icons/panda_192_192.png"><link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/atom-one-light.min.css" rel="stylesheet"><link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/atom-one-dark.min.css" rel="stylesheet" media="screen and (prefers-color-scheme:dark)"><link href="https://cdn.bootcss.com/uikit/3.2.0/css/uikit.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/uikit/3.2.0/js/uikit.min.js" async></script><script src="https://cdn.bootcss.com/uikit/3.2.0/js/uikit-icons.min.js" async></script><link rel="stylesheet" href="/styles/cold-stone.css"><noscript><p class="text-center">JavaScriptを有効にしてください</p></noscript><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script>window.COLD_STONE={root:"/",author:"半田情報通信(Panda telecoms)",gaid:"UA-171129276-1"}</script><script src="//www.googletagmanager.com/gtag/js?id=UA-171129276-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-171129276-1")</script></head><body><amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-PMGKCVS&gtm.url=SOURCE_URL" data-credentials="include"></amp-analytics><header class="header" uk-sticky="top: 100; animation: uk-animation-slide-top; bottom: #sticky-on-scroll-up"><nav class="wrapper header-content"><div class="nav-overlay uk-navbar-left"><h1 class="title nav-list-item uk-logo" data-link="/"><a href="/" data-link="/">ぱんだのてちょう</a></h1><ul class="nav-list"><li class="nav-list-item" data-link="/categories/"><a class="nav-list-link" href="/categories">カテゴリー</a></li><li class="nav-list-item" data-link="/about/"><a class="nav-list-link" href="/about/">About Me</a></li><li class="nav-list-item" data-link="/rss/"><a class="nav-list-link" href="/atom.xml">RSS</a></li></ul></div><div class="uk-navbar-right translate-x"><a class="uk-navbar-toggle" href="#modal-full" uk-search-icon uk-toggle></a></div></nav></header><div id="modal-full" class="uk-modal-full uk-modal" uk-modal><div class="uk-modal-dialog uk-flex uk-flex-center uk-flex-middle" uk-height-viewport><button class="uk-modal-close-full" type="button" uk-close></button><form class="uk-search uk-search-large search-form" action="//google.com/search" method="get" accept-charset="UTF-8" target="_blank"><input class="uk-search-input search-form-input" type="search" name="q" placeholder="検索" autofocus autocomplete="false"> <input type="hidden" name="sitesearch" value="https://panda-telecoms.github.io"></form></div></div><main class="main wrapper"><article class="article slide-in-right uk-article"><section class="article-header"><h1 class="article-title uk-article-title">【PostGIS】ローカルのdockerでPostGIS+pgrouting環境を作ってみる</h1><p class="article-meta uk-article-meta"><span class="meta-info"><span>更新日時&#58;<time class="post-time" datetime="2020-07-27">2020-07-27</time> </span><span>閲覧時間&#58; 7 min</span> <span class="hide" id="busuanzi_container_page_pv">閲覧回数&#58; <span id="busuanzi_value_page_pv"></span></span></span></p></section><section class="article-content"><p>最近PostGISを使ったアプリの構築をしました。</p><p>地図の経路検索とかをSQLでできてPostGIS面白いです。</p><p>ローカルでDocker上でOSMのデータを使ってPostGiS+pgrouting環境を作ってみました。</p><h2 id="但し書き"><a href="#但し書き" class="headerlink" title="但し書き"></a>但し書き</h2><ul><li>やっつけです。もっときれいなやり方あるかもしれません。</li><li>1から改めて検証したけど漏れがあったらすみません。</li></ul><h2 id="使ったDockerイメージ"><a href="#使ったDockerイメージ" class="headerlink" title="使ったDockerイメージ"></a>使ったDockerイメージ</h2><p><a href="https://hub.docker.com/r/pgrouting/pgrouting/" target="_blank" rel="noopener">pgrouting/pgrouting</a></p><ul><li>PostGIS+pgroutingのイメージ。今回はこれをベースにosm2pgroutingも入れます。</li></ul><p><a href="https://hub.docker.com/r/openfirmware/osm2pgsql" target="_blank" rel="noopener">openfirmware/osm2pgsql</a></p><ul><li>OSMのデータをインポートするためのツール。</li></ul><h2 id="最終的なDocker-compose"><a href="#最終的なDocker-compose" class="headerlink" title="最終的なDocker-compose"></a>最終的なDocker-compose</h2><p><a href="https://github.com/panda-telecoms/postgis-osm" target="_blank" rel="noopener">https://github.com/panda-telecoms/postgis-osm</a></p><h2 id="使い方"><a href="#使い方" class="headerlink" title="使い方"></a>使い方</h2><ol><li><p>Git pullしてdocker-compose.ymlのあるところで下記コマンドを実行</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure></li><li><p>postgis、pgroutingの有効化</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ docker-compose run postgis sh -c &#39;exec psql -d&quot;$POSTGRES_DB&quot; -hpostgis -p &quot;$POSTGRES_PORT_5432_TCP_PORT&quot; -U postgres&#39;</span><br><span class="line">osm&#x3D;# CREATE EXTENSION postgis;</span><br><span class="line">CREATE EXTENSION</span><br><span class="line">osm&#x3D;# CREATE EXTENSION pgrouting;</span><br><span class="line">CREATE EXTENSION</span><br><span class="line">osm&#x3D;#</span><br></pre></td></tr></table></figure></li><li><p>OSMのデータを作る</p></li></ol><p>こちらから最寄りのデータを取得します。<br>日本地図なんかは大きいデータになるのでローカルで遊ぶには向いてないと思います。<br>(近所の方がなじみがあって使いやすいと思いますし)</p><p>ファイル形式はpbfで落とします。<br><a href="https://extract.bbbike.org/" target="_blank" rel="noopener">https://extract.bbbike.org/</a></p><ol start="4"><li>pbfからosmデータにコンバートする</li></ol><p>3で落としたデータだけでもPostGISを使うことはできます。<br>もしpgroutingを使うときはosm2pgroutingを使うときにpbfからosm形式に変換しないといけません。</p><p>Osmconvertというツールが公開されているのでこちらをつかって変換してみてください<br><a href="https://wiki.openstreetmap.org/wiki/Osmconvert" target="_blank" rel="noopener">https://wiki.openstreetmap.org/wiki/Osmconvert</a></p><ol start="5"><li>データのインポート</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#96;&#96;&#96;</span><br><span class="line"># osm2pgsqlでインポート</span><br><span class="line">$ docker-compose run osm2pgsql -c &#39;osm2pgsql --create --slim --cache 2000 --database $PG_ENV_OSM_DB --username $PG_ENV_OSM_USER --host pg --port $PG_PORT_5432_TCP_PORT &#x2F;osm&#x2F;○○.pbf -W&#39;</span><br><span class="line"># osm2pgroutingでpgrouting用データインポート</span><br><span class="line">$ docker-compose exec postgis sh -c &#39;osm2pgrouting -f &#x2F;osm&#x2F;○○.osm -h postgis -Upostgres -d&quot;$POSTGRES_DB&quot; -p &quot;$POSTGRES_PORT_5432_TCP_PORT&quot; --conf &#x2F;usr&#x2F;local&#x2F;share&#x2F;osm2pgrouting&#x2F;○○.xml -W&quot;$POSTGRES_PASSWORD&quot;&#39;</span><br></pre></td></tr></table></figure><h2 id="使ってみる"><a href="#使ってみる" class="headerlink" title="使ってみる"></a>使ってみる</h2><p>psqlで入ってデータを確認します</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker-compose run postgis sh -c &#39;exec psql -d&quot;$POSTGRES_DB&quot; -hpostgis -p &quot;$POSTGRES_PORT_5432_TCP_PORT&quot; -U postgres&#39;</span><br><span class="line">Password for user postgres:</span><br><span class="line">psql (12.3 (Debian 12.3-1.pgdg100+1))</span><br><span class="line">Type &quot;help&quot; for help.</span><br><span class="line"></span><br><span class="line">osm&#x3D;# \l</span><br><span class="line">                                 List of databases</span><br><span class="line">   Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges</span><br><span class="line">-----------+----------+----------+------------+------------+-----------------------</span><br><span class="line"> osm       | postgres | UTF8     | en_US.utf8 | en_US.utf8 |</span><br><span class="line"> postgres  | postgres | UTF8     | en_US.utf8 | en_US.utf8 |</span><br><span class="line"> template0 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | &#x3D;c&#x2F;postgres          +</span><br><span class="line">           |          |          |            |            | postgres&#x3D;CTc&#x2F;postgres</span><br><span class="line"> template1 | postgres | UTF8     | en_US.utf8 | en_US.utf8 | &#x3D;c&#x2F;postgres          +</span><br><span class="line">           |          |          |            |            | postgres&#x3D;CTc&#x2F;postgres</span><br><span class="line">(4 rows)</span><br><span class="line"></span><br><span class="line">osm&#x3D;# \d</span><br><span class="line">                    List of relations</span><br><span class="line"> Schema |           Name           |   Type   |  Owner</span><br><span class="line">--------+--------------------------+----------+----------</span><br><span class="line"> public | configuration            | table    | postgres</span><br><span class="line"> public | configuration_id_seq     | sequence | postgres</span><br><span class="line"> public | geography_columns        | view     | postgres</span><br><span class="line"> public | geometry_columns         | view     | postgres</span><br><span class="line"> public | planet_osm_line          | table    | postgres</span><br><span class="line"> public | planet_osm_nodes         | table    | postgres</span><br><span class="line"> public | planet_osm_point         | table    | postgres</span><br><span class="line"> public | planet_osm_polygon       | table    | postgres</span><br><span class="line"> public | planet_osm_rels          | table    | postgres</span><br><span class="line"> public | planet_osm_roads         | table    | postgres</span><br><span class="line"> public | planet_osm_ways          | table    | postgres</span><br><span class="line"> public | pointsofinterest         | table    | postgres</span><br><span class="line"> public | pointsofinterest_pid_seq | sequence | postgres</span><br><span class="line"> public | spatial_ref_sys          | table    | postgres</span><br><span class="line"> public | ways                     | table    | postgres</span><br><span class="line"> public | ways_gid_seq             | sequence | postgres</span><br><span class="line"> public | ways_vertices_pgr        | table    | postgres</span><br><span class="line"> public | ways_vertices_pgr_id_seq | sequence | postgres</span><br><span class="line">(18 rows)</span><br></pre></td></tr></table></figure><p>planet_osm_pointの中を見てみます。カラム<code>way</code>を<a href="https://ja.wikipedia.org/wiki/GeoJSON" target="_blank" rel="noopener">geojson</a>として出力することでPostGISの関数も使えることを確認してみます</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">osm&#x3D;# select name, ST_AsGeoJSON(way) from planet_osm_point limit 10;</span><br><span class="line">-[ RECORD 1 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         | 西澄寺</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15548888.4,4251009.61]&#125;</span><br><span class="line">-[ RECORD 2 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         | 西澄寺前</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15548980.2,4251038.51]&#125;</span><br><span class="line">-[ RECORD 3 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         |</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549093,4251074.99]&#125;</span><br><span class="line">-[ RECORD 4 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         | 駒繋神社 (Komatsunagi Shrine)</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549132.3,4250971.06]&#125;</span><br><span class="line">-[ RECORD 5 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         | Leap</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549187.6,4251096.29]&#125;</span><br><span class="line">-[ RECORD 6 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         | 駒繋小学校裏</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549176,4251103.24]&#125;</span><br><span class="line">-[ RECORD 7 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         | コインパーキング</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549308.4,4251016.69]&#125;</span><br><span class="line">-[ RECORD 8 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         | いづみ幼稚園</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549297.9,4251098.06]&#125;</span><br><span class="line">-[ RECORD 9 ]+------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         |</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549419.6,4251060.05]&#125;</span><br><span class="line">-[ RECORD 10 ]------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">-----------</span><br><span class="line">name         |</span><br><span class="line">st_asgeojson | &#123;&quot;type&quot;:&quot;Point&quot;,&quot;crs&quot;:&#123;&quot;type&quot;:&quot;name&quot;,&quot;properties&quot;:&#123;&quot;name&quot;:&quot;spatialreferencing.org:900913&quot;&#125;&#125;,&quot;coordinates&quot;:[15549424,4251069.51]&#125;</span><br><span class="line"></span><br><span class="line">osm&#x3D;#</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>データは良さそうですし、PostGISの関数も使えてます。</p><p>QGISで出力するとこんな具合<br><img src="asset/20200727/postgis1.png" alt="QGISの結果"><br>pgroutingも使ってみます。<br><a href="https://live.osgeo.org/archive/10.5/ja/quickstart/pgrouting_quickstart.html" target="_blank" rel="noopener">https://live.osgeo.org/archive/10.5/ja/quickstart/pgrouting_quickstart.html</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">osm&#x3D;# SELECT seq, edge, b.the_geom::text AS &quot;the_geom (truncated)&quot;</span><br><span class="line">osm-#         FROM pgr_dijkstra(&#39;</span><br><span class="line">osm&#39;#                 SELECT gid as id, source, target,</span><br><span class="line">osm&#39;#                         length as cost FROM ways&#39;,</span><br><span class="line">osm(#                 100, 600, false</span><br><span class="line">osm(#         ) a INNER JOIN ways b ON (a.edge &#x3D; b.gid) ORDER BY seq;</span><br><span class="line"> seq |  edge  |                     the_geom (truncated)</span><br><span class="line">-----+--------+--------------------------------------------------------------</span><br><span class="line">   1 |  85803 | 0102000020E6100000020000009B2F40EC567861400FF6813F57D5414074</span><br><span class="line">   2 |  82819 | 0102000020E610000002000000745C323358786140C23060C955D54140DE</span><br><span class="line">   3 |  79695 | 0102000020E610000004000000DE0951195A786140F35E10EC53D5414048</span><br><span class="line">   4 |  79947 | 0102000020E61000000200000026E6B4025E7861404D96A47C52D541405E</span><br><span class="line">   5 |  82425 | 0102000020E6100000020000005E2F4D1160786140BE37E1B952D541405D</span><br><span class="line">   6 |  84942 | 0102000020E6100000020000005D9896A266786140E7CAFB9353D5414063</span><br><span class="line">   7 |  84941 | 0102000020E61000000300000063F60DA767786140462F59CB53D54140AA</span><br><span class="line">   8 |  84940 | 0102000020E610000004000000E89326EF6D7861401B7629BF56D54140E3</span><br><span class="line">   9 |  82601 | 0102000020E61000000200000003571E496E7861404A0E338F57D54140E8</span><br><span class="line">  10 |  85215 | 0102000020E61000000200000080B6D5AC73786140D9FFA5B162D5414003</span><br><span class="line">  11 |  63039 | 0102000020E61000000200000038EDCE7F747861401C57C80160D5414080</span><br><span class="line">  12 |  65173 | 0102000020E610000002000000EDCA78A576786140CD2ECECE58D5414038</span><br><span class="line">  13 |  61972 | 0102000020E610000002000000276728EE78786140772FF7C951D54140ED</span><br><span class="line">  14 |  62747 | 0102000020E610000002000000889C63E57C7861409BA6745545D5414027</span><br><span class="line">  15 |  65172 | 0102000020E6100000020000008754AC757D786140A888789043D5414088</span><br><span class="line">  16 |  37996 | 0102000020E6100000020000008754AC757D786140A888789043D54140C2</span><br><span class="line">  17 |  44007 | 0102000020E610000002000000C2C8810D7E7861405AE5F85745D5414072</span><br><span class="line">  18 | 108968 | 0102000020E6100000020000008D2551D47E786140B316557545D5414072</span><br><span class="line">  19 | 112462 | 0102000020E6100000020000005AAAC1EA7E786140A17D512745D541408D</span><br><span class="line">  20 | 112461 | 0102000020E610000002000000E051BEFB7E786140D7D8CAF044D541405A</span><br><span class="line">  21 | 112459 | 0102000020E610000002000000D310FA3E81786140BDAF253F3DD54140E0</span><br><span class="line">  22 | 112473 | 0102000020E610000002000000B217659181786140FF00101C3CD54140D3</span><br><span class="line">  23 | 108971 | 0102000020E61000000200000082D8E3CF81786140172F713F3BD54140B2</span><br><span class="line">  24 | 112474 | 0102000020E610000002000000E3FFE9618378614085F70B2C36D5414082</span><br><span class="line">  25 | 114593 | 0102000020E6100000020000000C31A88085786140D622FD512FD54140E3</span><br><span class="line">  26 | 114592 | 0102000020E6100000040000001AB3DB1D887861406FEC7EBA26D54140D9</span><br><span class="line">  27 | 113337 | 0102000020E610000002000000133823948878614046A11B5025D541401A</span><br><span class="line">  28 | 108972 | 0102000020E610000004000000B0E02307917861403C212A430BD5414016</span><br><span class="line">  29 | 112475 | 0102000020E61000000300000009821145927861405A3AD5100BD541401E</span><br><span class="line">  30 | 123025 | 0102000020E61000000200000009821145927861405A3AD5100BD541407C</span><br><span class="line">  31 | 123026 | 0102000020E6100000020000007CBB80F2927861402B604C4409D5414028</span><br><span class="line">  32 |  91484 | 0102000020E6100000040000000C3AC6BA9D786140E424DE4B2BD54140E8</span><br><span class="line">  33 |  95842 | 0102000020E610000004000000E4C2DC499F78614044F1CFB128D5414091</span><br><span class="line">  34 | 105927 | 0102000020E610000004000000E4C2DC499F78614044F1CFB128D5414014</span><br><span class="line">  35 |  97361 | 0102000020E610000002000000904B1C79A07861404419AA622AD5414048</span><br><span class="line">  36 |  33111 | 0102000020E610000002000000F5F6E7A2A17861401B16FE6728D5414048</span><br><span class="line">  37 |   4839 | 0102000020E610000002000000AC83CD4AA47861402082058B1ED54140F5</span><br><span class="line">  38 |   3039 | 0102000020E610000002000000369A12FFA67861406753646314D54140AC</span><br><span class="line">  39 |   9945 | 0102000020E610000002000000369A12FFA67861406753646314D54140AA</span><br><span class="line">  40 | 141419 | 0102000020E61000000300000000F7E1C5A778614061DEE34C13D541403F</span><br><span class="line">  41 | 112986 | 0102000020E610000007000000CCCB063EAB786140794B83EC06D5414037</span><br><span class="line">  42 |  16588 | 0102000020E610000002000000CCCB063EAB786140794B83EC06D5414018</span><br><span class="line">  43 |  16589 | 0102000020E610000002000000A348ADE6AF7861403E473F7507D5414018</span><br><span class="line">  44 |  16604 | 0102000020E610000002000000A348ADE6AF7861403E473F7507D541405A</span><br><span class="line">  45 |   9944 | 0102000020E6100000020000005A03A5B2B27861400A8BE5F10FD5414023</span><br><span class="line">  46 |   4832 | 0102000020E61000000200000023884E2AB578614049AD41A907D54140C1</span><br><span class="line">  47 |  84331 | 0102000020E610000002000000313894EBB77861408E475FF70CD54140C1</span><br><span class="line">  48 | 109875 | 0102000020E6100000020000002BBDDB61B8786140891A96500BD5414031</span><br><span class="line">  49 | 115356 | 0102000020E6100000020000001F0F22BEB87861406BA5C63A0BD541402B</span><br><span class="line">  50 | 115355 | 0102000020E610000002000000264003A0C07861407A4501ECEDD441401F</span><br><span class="line">  51 | 115353 | 0102000020E610000002000000089A852CC1786140AFF6668AEFD4414026</span><br><span class="line">  52 |  90581 | 0102000020E610000002000000649126DEC17861405184D4EDECD4414008</span><br><span class="line">  53 | 141125 | 0102000020E6100000020000009B3347FBC47861404BEC3598E1D4414064</span><br><span class="line">  54 |  47697 | 0102000020E6100000020000000EB5125FD2786140571DDE18A7D441409B</span><br><span class="line">  55 |  11558 | 0102000020E610000002000000F7F8CE79D7786140F2BB445090D441400E</span><br><span class="line">  56 |  13537 | 0102000020E6100000020000002BD5AA02DA786140BC9F090385D44140F7</span><br><span class="line">  57 |  33707 | 0102000020E610000002000000667792BEDA78614058422DBC81D441402B</span><br><span class="line">  58 |  11667 | 0102000020E610000002000000634FF16EDB786140E331A8DB7ED4414066</span><br><span class="line">  59 |  22050 | 0102000020E6100000030000004E14D7E7E07861405451611168D4414077</span><br><span class="line">  60 |   8204 | 0102000020E610000002000000DD103EEFE17861404468A96164D441404E</span><br><span class="line">  61 |  79720 | 0102000020E610000002000000564F9C92E278614003C70A2362D44140DD</span><br><span class="line">(61 rows)</span><br><span class="line"></span><br><span class="line">osm&#x3D;#</span><br></pre></td></tr></table></figure><p>QGISで見てみると。。。(緑の線がそれ)<br><img src="asset/20200727/postgis2.png" alt="QGISの結果"></p><p>良さそうです。</p><hr><p>今の検証結果をグラフィカルに見たいときはQGISなりを使います。<br>今回のdocker構成の場合は</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ホスト名: localhost</span><br><span class="line">ユーザ名: postgres</span><br><span class="line">パスワード: password</span><br><span class="line">DB名: osm</span><br><span class="line">ポート: 5432</span><br></pre></td></tr></table></figure><p>でいけるかなと思います。<br>(繋ぎ方もどこかで書くかもしれません)</p></section></article><section class="prev-next card slide-in-right"><a class="link-disabled prev link">&larr; Not More</a> <a href="/2020/06/26/【EC-CUBE4】DoctrineExtensionsでEC-CUBEのDBを多言語化する/" class="link next" title="【EC-CUBE4】DoctrineExtensionsでEC-CUBEのDBを多言語化する"><span class="hover-underline-animation">【EC-CUBE4】DoctrineExtensionsでEC-CUBEのDBを多言語化する &rarr;</span></a></section><section class="article-toc"><div class="card"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#但し書き"><span class="toc-text">但し書き</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使ったDockerイメージ"><span class="toc-text">使ったDockerイメージ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最終的なDocker-compose"><span class="toc-text">最終的なDocker-compose</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使い方"><span class="toc-text">使い方</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使ってみる"><span class="toc-text">使ってみる</span></a></li></ol></div><div class="card"><p class="subtitle"><a href="https://twitter.com/balaenoptera_1" target="_blank" rel="noopener">プライベートのTwitter</a><br><a href="https://twitter.com/panda_telecoms" target="_blank" rel="noopener">仕事のTwitter</a></p></div></section><a class="card back-to-top" id="backTop">&UpArrow;</a></main><script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="/scripts/busuanzi.js" referrerpolicy="origin"></script><script src="/scripts/cold-stone.js"></script><script src="//www.googletagmanager.com/gtag/js?id=UA-171129276-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config",window.COLD_STONE.gaid)</script></body></html>